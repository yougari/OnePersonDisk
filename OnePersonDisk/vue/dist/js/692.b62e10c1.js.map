{"version":3,"file":"js/692.b62e10c1.js","mappings":"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","sources":["webpack://vue/./src/views/front/OpenShare.vue","webpack://vue/src/views/front/OpenShare.vue","webpack://vue/./src/views/front/OpenShare.vue?6991","webpack://vue/./src/views/front/OpenShare.vue?be65"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.validateFailed)?_c('div',{staticStyle:{\"margin\":\"150px auto\",\"text-align\":\"center\",\"font-size\":\"30px\",\"color\":\"#666\"}},[_vm._v(\"分享文件不存在或已被取消\")]):_c('div',{staticClass:\"card\",staticStyle:{\"margin\":\"5px auto 100px auto\",\"width\":\"70%\"}},[_c('div',{staticStyle:{\"color\":\"#666\",\"display\":\"flex\",\"align-items\":\"center\"}},[_vm._v(\" 分享：\"),_c('strong',{staticStyle:{\"color\":\"#333\"}},[_vm._v(_vm._s(_vm.share.name))]),_c('i',{staticClass:\"el-icon-time\",staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"}}),_vm._v(\" \"+_vm._s(_vm.share.shareTime)+\" \"),_c('span',{staticStyle:{\"margin-left\":\"20px\"}},[_c('i',{staticClass:\"el-icon-info\",staticStyle:{\"margin-right\":\"5px\"}}),(_vm.share.status?.includes('小时'))?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.share.status))]):_c('span',[_vm._v(_vm._s(_vm.share.status))])])]),_c('div',[_c('div',{staticStyle:{\"padding\":\"15px 0\",\"margin-top\":\"30px\"}},[_c('a',{staticStyle:{\"color\":\"#666\"},attrs:{\"href\":'/front/openShare?code=' + _vm.code + '&shareId=' + _vm.shareId}},[_vm._v(\"全部文件 \"),(_vm.folders.length)?_c('i',{staticClass:\"el-icon-arrow-right\"}):_vm._e()]),_vm._l((_vm.folders),function(item,index){return _c('a',{key:item.id,staticStyle:{\"color\":\"#666\"},attrs:{\"href\":'/front/openShare?code=' + _vm.code + '&shareId=' + _vm.shareId + '&folderId=' + item.id}},[_vm._v(\" \"+_vm._s(item.name)+\" \"),(index !== _vm.folders.length - 1)?_c('i',{staticClass:\"el-icon-arrow-right\"}):_vm._e()])})],2),_c('el-table',{attrs:{\"size\":\"medium\",\"stripe\":\"\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"display\":\"flex\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.openFile(scope.row)}}},[_c('div',{staticStyle:{\"flex\":\"1\"}},[_c('i',{class:_vm.typeList.find(v => v.text === scope.row.type)?.icon || 'el-icon-file',staticStyle:{\"color\":\"#409EFF\"}}),(!scope.row.unSave)?_c('span',{staticStyle:{\"margin-left\":\"5px\"}},[_vm._v(_vm._s(scope.row.name))]):_vm._e()]),_c('div',{staticStyle:{\"color\":\"#409EFF\",\"font-size\":\"14px\"}},[(scope.row.folder === '否')?_c('el-tooltip',{attrs:{\"content\":\"下载\",\"effect\":\"light\",\"open-delay\":1000}},[_c('i',{staticClass:\"el-icon-download\",staticStyle:{\"margin-right\":\"10px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.download(scope.row.file)}}})]):_vm._e()],1)])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"updateTime\",\"label\":\"修改时间\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"size\",\"label\":\"文件大小（KB）\",\"width\":\"200\"}})],1)],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div style=\"margin: 150px auto; text-align: center; font-size: 30px; color: #666\" v-if=\"validateFailed\">分享文件不存在或已被取消</div>\r\n    <div class=\"card\" style=\"margin: 5px auto 100px auto; width: 70%\" v-else>\r\n      <div style=\"color: #666; display: flex; align-items: center\">\r\n        分享：<strong style=\"color: #333\">{{ share.name }}</strong>\r\n        <i class=\"el-icon-time\" style=\"margin-left: 20px; margin-right: 5px\"></i> {{ share.shareTime }}\r\n        <span style=\"margin-left: 20px\">\r\n          <i class=\"el-icon-info\" style=\"margin-right: 5px\"></i>\r\n          <span v-if=\"share.status?.includes('小时')\" style=\"color: red\">{{ share.status }}</span>\r\n          <span v-else>{{ share.status }}</span>\r\n        </span>\r\n      </div>\r\n\r\n      <div>\r\n        <div style=\"padding: 15px 0; margin-top: 30px\">\r\n          <a style=\"color: #666\" :href=\"'/front/openShare?code=' + code + '&shareId=' + shareId\">全部文件 <i class=\"el-icon-arrow-right\" v-if=\"folders.length\"></i></a>\r\n          <a style=\"color: #666\" :href=\"'/front/openShare?code=' + code + '&shareId=' + shareId + '&folderId=' + item.id\" v-for=\"(item, index) in folders\" :key=\"item.id\">\r\n            {{ item.name }} <i class=\"el-icon-arrow-right\" v-if=\"index !== folders.length - 1\"></i>\r\n          </a>\r\n        </div>\r\n        <el-table size=\"medium\" stripe :data=\"tableData\">\r\n          <el-table-column label=\"名称\">\r\n            <template v-slot=\"scope\">\r\n              <div style=\"display: flex; cursor: pointer\" @click=\"openFile(scope.row)\">\r\n                <div style=\"flex: 1\">\r\n                  <i style=\"color: #409EFF\" :class=\"typeList.find(v => v.text === scope.row.type)?.icon || 'el-icon-file'\"></i>\r\n                  <span v-if=\"!scope.row.unSave\" style=\"margin-left: 5px\">{{ scope.row.name }}</span>\r\n                </div>\r\n                <div style=\"color: #409EFF; font-size: 14px\">\r\n                  <el-tooltip content=\"下载\" effect=\"light\" :open-delay=\"1000\" v-if=\"scope.row.folder === '否'\">\r\n                    <i class=\"el-icon-download\" style=\"margin-right: 10px; cursor: pointer\" @click.stop=\"download(scope.row.file)\"></i>\r\n                  </el-tooltip>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column prop=\"updateTime\" label=\"修改时间\" width=\"200\"></el-table-column>\r\n          <el-table-column prop=\"size\" label=\"文件大小（KB）\" width=\"200\"></el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"OpenShare\",\r\n  data() {\r\n    return {\r\n      code: this.$route.query.code,\r\n      shareId: this.$route.query.shareId,\r\n      share: {},\r\n      validateFailed: false,   // 验证失败\r\n      folders: [],\r\n      typeList: [\r\n        { text: 'mp3', icon: 'el-icon-mp3' },\r\n        { text: 'mp4', icon: 'el-icon-mp4' },\r\n        { text: 'jpg', icon: 'el-icon-jpg' },\r\n        { text: 'jpeg', icon: 'el-icon-jpeg' },\r\n        { text: 'png', icon: 'el-icon-png' },\r\n        { text: 'pdf', icon: 'el-icon-pdf' },\r\n        { text: 'docx', icon: 'el-icon-docx' },\r\n        { text: 'txt', icon: 'el-icon-text' },\r\n        { text: 'zip', icon: 'el-icon-zip' },\r\n        { text: 'folder', icon: 'el-icon-folder' },\r\n      ],\r\n      tableData: [],\r\n      folderId: this.$route.query.folderId   // 注意给 全局的folderId 赋值，要不然后面没法查询数据\r\n    }\r\n  },\r\n  created() {\r\n    if (!this.code||!this.shareId){//验证分享页面的参数\r\n      this.validateFailed=true //缺少必须的参数（code或者shareId或者都没有时）\r\n      return\r\n    }\r\n    this.load()\r\n  },\r\n  methods: {\r\n    openFile(row) {\r\n      if (row.folder === '是') { // 文件夹  点进来肯定有 folderId\r\n        location.href = '/front/openShare?code=' + this.code + '&shareId=' + this.shareId + '&folderId=' + row.id\r\n      } else {  // 如果是文件的话  直接预览\r\n        window.open(this.$baseUrl + '/diskFiles/preview/' + row.id)\r\n      }\r\n    },\r\n    download(url) {\r\n      window.open(url)  // 文件下载\r\n    },\r\n    load() {\r\n      this.$request.get('/share/selectById/' + this.shareId).then(res => {\r\n        this.share = res.data || {}\r\n        this.tableData = res.data ? [res.data] : []\r\n        if(this.share.status ==='已过期'){//分享时间到，文件过期\r\n          this.validateFailed = true\r\n        }\r\n        // 验证code对不对\r\n        if (this.share.code !== this.code) {\r\n          this.validateFailed = true\r\n        } else {\r\n          this.loadFiles()\r\n        }\r\n      })\r\n    },\r\n    loadFiles() {\r\n      // 查询当前目录的数据\r\n      this.$request.get('/diskFiles/selectShare', {\r\n        params: {\r\n          shareId: this.shareId || null,\r\n          folderId: this.folderId || null\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data || []\r\n      })\r\n\r\n      // 查询当前目录的路径数据\r\n      this.$request.get('/diskFiles/selectFolders', {\r\n        params: {folderId: this.folderId || null}\r\n      }).then(res => {\r\n        this.folders = res.data || []\r\n        // if (this.folders?.length) {\r\n        //   this.folders.splice(0, 1)\r\n        // }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OpenShare.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OpenShare.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./OpenShare.vue?vue&type=template&id=aeeb4f92&scoped=true\"\nimport script from \"./OpenShare.vue?vue&type=script&lang=js\"\nexport * from \"./OpenShare.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aeeb4f92\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","validateFailed","staticStyle","_v","staticClass","_s","share","name","shareTime","status","includes","attrs","code","shareId","folders","length","_e","_l","item","index","key","id","tableData","scopedSlots","_u","fn","scope","on","$event","openFile","row","class","typeList","find","v","text","type","icon","unSave","folder","stopPropagation","download","file","staticRenderFns","data","$route","query","folderId","created","load","methods","location","href","window","open","$baseUrl","url","$request","get","then","res","loadFiles","params","component"],"sourceRoot":""}